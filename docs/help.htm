<html>
<head><title>wkbre v0.0.7.0 Help file</title></head>
<body>
<style>
body {
  font-family: sans-serif;
}
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}
tr.subhead {
  background-color: #dddddd;
  text-align: center;
}
th {
  background-color: #80a0ff;
}
</style>

<h1>wkbre v0.0.7.0 Help file</h1>

<h2>Introduction</h2>
<p><b><i>wkbre</i></b> is a engine reimplementation of the game <b>Warrior Kings (Battles)</b> (developed by Black Cactus) in which you can load, edit, play and save saved games of the game. It loads the game set, including the .cpp files, meshes, textures, …, so you can get a 3D view looking exactly as in the game.</p>
<p>The program is open source and is licensed under the GNU GPL 3. The source code and the latest build are available here: <a href="https://github.com/AdrienTD/wkbre">https://github.com/AdrienTD/wkbre</a></p>

<h2>Start</h2>
<p>First you need to configure the "settings.txt" file. Ensure that the <b>GAME_DIR</b> value is the directory of the game (with "data.bcp" and the "saved" folder). The other settings are not important.</p>
<p>Now you can start the executable (wkbre.exe). If it doesn’t start, be sure that the Visual C++ 2010 Redistributable Package (x86) and the latest DirectX runtime are installed. If not, you can download them from <a href="http://www.microsoft.com/download">http://www.microsoft.com/download</a> .</p>
<p>You will be asked which saved game you want to load. Select a file in the list then click OK or double-click on the file to open it.</p>
<p>Use the <b>arrow</b>, <b>‘E’</b> and <b>‘D’</b> keys to move the camera. Hold the <b>NumPad 0</b> key and move the mouse to rotate the camera.</p>
<p><b>Click</b> an object to select it. Press the <b>Control</b> key and the <b>arrow</b> keys at the same time to move the selected object. You can also press the <b>Insert</b> key to duplicate the selected object, the <b>Delete</b> key to delete it, and the <b>*</b> or <b>/</b> key to change the size. Look at the menu bar in the program or the Keys section of this document for a list of available commands.</p>
<p>Click <b>Window > Selected object information</b> to open a window where you can view and edit properties of the selected object.</p>
<p>To create a new object, click <b>Window > Object creation</b> and a window will open. First click the white box next to <b>"Give to:"</b> to select the player you want to give the new object, then click in the big list below the type of the new object. You can shorten the list by typing a part of the type name in the <b>"Filter"</b> text box. Then <b>right-click on the game view</b> to create the object.</p>
<p>Once you have finished doing some modifications in the level, press <b>F3</b> and type the name of the new savegame. The name should end with <b>“.sav”</b>, otherwise the game won’t display it in its list.</p>

<h2>Playing games in wkbre</h2>
<p>wkbre is also able to let you play the game. This is done by interpreting the game set script which can be found in the game data (data.bcp).</p>
<p>When you press <b>'P'</b>, the game will be unpaused. You can see your units moving, peasants doing their work, units attacking, etc...</p>
<p>When you have selected an unit you can also give it an order by <b>right-clicking</b> a target, or press <b>'A'</b> to execute button commands.</p>
<p>Please note that savegames with AI players might not work because some game set script features related to AI are not supported yet.</p>
<p>If you have opened a lvl file, you can press <b>'S'</b> to start the level (for example in a tutorial this will show the first message).</p>
<p>You can also take control of the camera of a player/client with <b>'F'</b>.</p>
<p>Finally, press <b>'Enter'</b> to switch into a "Game" interface.</p>
<p>See the Keys section and the "Game" submenu in the menu bar for a list of available commands.</p>
<p>Also please keep in mind that the ability to play games in wkbre is "experimental", this means some features are missing and bugs can be encountered.</p>

<h2>Windows</h2>
<p>wkbre v0.0.7 now adds a few floating windows which allows you to view/edit a lot of properties the savegame and its objects. You can open them via the <b>Window</b> submenu.</p>
<p>The windows are:</p>

<h3>Selected object information</h3>
<p>This shows information/properties of the first selected object. If no object is selected, it shows nothing.</p>
<p>The window is divided in groups that are all closed by default. To open one, click it.</p>
<ul>
<li>In the <b>Location</b> group, you can edit the position, orientation and the scale of the object that you can modify by dragging a number with the mouse. If you want to modify the scale and orientation of multiple objects at the same time, click the buttons below "Copy to all sel. objects.".</li>
<li>In <b>Appearance</b> you can change the subtype and the appearance.</li>
<li>In <b>Items</b> you can change the values of the items (for example: Food, Gold, Hit Points, ...). The 3 radio buttons as well as the <b>Filter</b> text box allows you to search for items easily.</li>
<li>In <b>Flags</b> you can set/unset certain flags, or even disable/enable the object. Note that unrenderable and disabled objects will still be shown in the editor, but not in the original game engine.</li>
<li>In <b>Order configuration</b> you can see the orders and tasks the object is currently doing.</li>
<li>In <b>Individual reactions</b> you can add and remove reactions.</li>
<li>In <b>Association</b> you can see the associates and associators in an association category.</li>
</ul>

<h3>Level tree</h3>
<p>Here you can view the whole tree of the objects in the level. Click a node to show its subordinates. Right-click a node to select the object (SHIFT+right-click to add to selection).</p>

<h3>Level information</h3>
<p>Like the Selected object information window, the window is divised in groups.</p>
<ul>
<li>In <b>Properites</b>, you can change the gameset, map and game type. Changes on these values will only take effect after the savegame is saved and reopened, and might make the savegame unopenable if they are incorrect. In this case you can always change them with a text editor and searching for GAME_SET, GAME_TYPE and MAP.</li>
<li>In <b>Time</b>, you can see the current time and modify the lock count. For example if you lose a campaign in the first WK, the level will be locked. You can then unlock the game by setting the lock count back to 0.</li>
<li>In <b>Alias</b>, you can see and modify the alias groups.</li>
<li>In <b>Diplomatic relationships</b> you can see and modify the relationships between two players.</li>
</ul>

<h3>Object creation</h3>
<p>Here you can easily create new objects. See the Start section of this document for a guide on how to use it.</p>
<p>The <b>Send "On Stampdown" event</b> checkbox will execute some game script after the object is created. This is especially needed for some MARKER objects. For example for a MARKER "AutoTrees ..." object this will automatically generate trees around the position of the new marker. For a village building, this will also automatically generate a cart. Sometimes this feature is important as the script that will be executed will initialise the new object properly. It is recommended to enable this feature with SAV files and to disable it with non-started LVL files.</p>

<h2>Keys</h2>
<p>The number (0-9) keys in the numeric keypad (NumPad) cannot be used, except if explicitely stated.</p>
<table>
<thead><tr><th>Key</th><th>Function</th></tr></thead>
<tbody>
<tr class="subhead"><td colspan="2"><b>Camera</b></td></tr>
<tr><td>Arrow key</td><td>Move camera</td></tr>
<tr><td>Shift</td><td>Accelerates the movement if held down.</td></tr>
<tr><td>E</td><td>Move up</td></tr>
<tr><td>D</td><td>Move down</td></tr>
<tr><td>T</td><td>Rotate up</td></tr>
<tr><td>G</td><td>Rotate down</td></tr>
<tr><td>U</td><td>Rotate left</td></tr>
<tr><td>I</td><td>Rotate right</td></tr>
<tr><td>1</td><td>Move to down-left corner</td></tr>
<tr><td>2</td><td>Move to down-right corner</td></tr>
<tr><td>3</td><td>Move to up-left corner</td></tr>
<tr><td>4</td><td>Move to up-right corner</td></tr>
<tr><td>5</td><td>Move to a selected player's manor</td></tr>
<tr><td>6</td><td>Move to a position specified on the minimap.</td></tr>
<tr><td>7</td><td>Reset orientation</td></tr>
<tr><td>8</td><td>Move to client’s position</td></tr>
<tr><td>NumPad 0</td><td>Holding it will allow you to rotate the camera by moving the mouse.</td></tr>
<tr class="subhead"><td colspan="2"><b>Level editing</b></td></tr>
<tr><td>Left mouse button</td><td>Select the object pointed by the mouse cursor (if the object is red).<br>Hold Shift for multiple selection.<br>Hold the left button for drag selection.</td></tr>
<tr><td>Insert</td><td>Duplicate selected object.</td></tr>
<tr><td>Delete</td><td>Delete selected object.</td></tr>
<tr><td>* (NumPad)</td><td>Multiply selected object’s scale by 1.5.</td></tr>
<tr><td>/ (NumPad)</td><td>Divide selected object’s scale by 1.5.</td></tr>
<tr><td>R</td><td>Rotate selected objects by 90°.</td></tr>
<tr><td>Control + Arrow key</td><td>Move selected object (hold down Shift to move it faster)</td></tr>
<tr><td>F2</td><td>Reset object heights</td></tr>
<tr><td>F3</td><td>Save game</td></tr>
<tr><td>F4</td><td>Delete all objects of selected class</td></tr>
<tr><td>F5</td><td>Delete all objects of a selected type</td></tr>
<tr><td>F6</td><td>Convert all objects of a selected type to another type</td></tr>
<tr><td>F7</td><td>Give all objects of a selected type to a player</td></tr>
<tr><td>F8</td><td>Create a new object</td></tr>
<tr><td>F9</td><td>Delete last object created with F8</td></tr>
<tr><td>F11</td><td>Randomize subtype of all objects</td></tr>
<tr><td>Tab</td><td>Enable/disable aligned movement.</td></tr>
<tr><td>O</td><td>Select object per ID.</td></tr>
<tr class="subhead"><td colspan="2"><b>Gaming</b></td></tr>
<tr><td>P</td><td>Pause/unpause game.</td></tr>
<tr><td>+</td><td>Increase game speed.</td></tr>
<tr><td>-</td><td>Decrease game speed.</td></tr>
<tr><td>X</td><td>Execute action sequence</td></tr>
<tr><td>C</td><td>Create a mapped type object via the selected object</td></tr>
<tr><td>V</td><td>Create object, put it in the same position of the selected object and send the "On Stampdown" event to it.</td></tr>
<tr><td>A</td><td>Execute command on selected objects (without target)</td></tr>
<tr><td>Y</td><td>Execute command on first selected objects targetting last selected object.</td></tr>
<tr><td>Q</td><td>Cancel all orders of all objects.</td></tr>
<tr><td>S</td><td>Start the level. (Send "On Level Start" event to all objects.)</td></tr>
<tr><td>Z</td><td>Remove all delayed and periodic action sequence executions.</td></tr>
<tr><td>H</td><td>Display a game text window.</td></tr>
<tr><td>F</td><td>Control a client (including its camera).</td></tr>
<tr><td>J</td><td>Send an event to the selected objects.</td></tr>
<tr><td>Right-click</td><td>Execute cursor command on the selected objects (target is object under the mouse cursor.)
   <br>With <b>Shift</b>: Do order last.
   <br>With <b>Control</b>: Do order first (current order will be suspended).
   <br>With nothing: Cancel all orders in stack then do the order.</td></tr>
<tr class="subhead"><td colspan="2"><b>Misc.</b></td></tr>
<tr><td>Escape</td><td>Exit</td></tr>
<tr><td>F1</td><td>Display information about the program</td></tr>
<tr><td>M</td><td>Display/hide terrain</td></tr>
<tr><td>K</td><td>Display/hide terrain grid</td></tr>
<tr><td>L</td><td>Display/hide time and object information</td></tr>
<tr><td>Backspace</td><td>Display/hide menu bar.</td></tr>
<tr><td>Enter</td><td>Switch between level and game view.</td></tr>
</tbody>
</table>
<p>There are also more commands which can only be accessed from the menu bar.</p>

<h2>Settings</h2>
<p>In “settings.txt”:</p>
<table>
<thead><tr><th>Setting</th><th>Value</th></tr></thead>
<tbody>
<tr><td>GAME_DIR</td><td>Game directory (in quotation marks)</td></tr>
<tr><td>FAR_Z_VALUE</td><td>The greater the value, the farther you can see.</td></tr>
<tr><td>OCCLUSION_RATE</td><td>The greater the value, the more you can see.</td></tr>
<tr><td>MAP_MAX_PART_SIZE</td><td>Maximum width and height (each in number of tiles) of a single part of the landscape.</td></tr>
<tr><td>HARDWARE_VERTEX_PROCESSING</td><td>1 for hardware, 0 for software vertex processing</td></tr>
<tr><td>TEXTURE_COMPRESSION</td><td>1 = texture compression (DXT1) enabled, 0 = disabled<br>(<b><u>NOTE:</u></b> In version 0.0.3, texture compression is always disabled. This may come back in future releases.)</td></tr>
<tr><td>VSYNC</td><td>1 = vertical synchronization enabled, 2 = high resolution VSYNC enabled, 0 = disabled</td></tr>
<tr><td>FOG</td><td>1 = fog enabled, 0 = fog disabled</td></tr>
<tr><td>FONT</td><td>Path to a .font file used to draw text (Don’t forget the quotation marks!)</td></tr>
<tr><td>HARDWARE_CURSOR</td><td>1 = Use the system cursor, 0 = Draw cursor in game screen buffer</td></tr>
<tr><td>SCREEN_SIZE</td><td>Initial size of the game screen/window size. Requires two numbers for width and height in pixels.</td></tr>
<tr><td>FULLSCREEN</td><td>0 = windowed, 1 = fullscreen (<b><u>NOTE:</u></b> Fullscreen mode buggy at the moment.)</td></tr>
<tr><td>VERTICAL_FOV</td><td>The FOV of the game camera in degrees.</td></tr>
<tr><td>MULTI_BCP</td><td>1 = load all BCPs found in the game directory<br>0 = load only data.bcp</td></tr>
<tr><td>DATA_DIRECTORY</td><td>1 = enable the "data" directory<br>0 = disable it</td></tr>
<tr><td>RENDERER</td><td>1 = Direct3D 9, 2 = OpenGL 1.1</td></tr>
<tr><td>USE_MAP_TEXTURE_DATABASE</td><td>0 = use a single grass texture for the terrain<br>1 = use all terrain textures from the game</td></tr>
<tr><td>MESH_BATCHING</td><td>Regroup multiples meshes in one batch, can improve graphics performance;<br>0 = disabled, 1 = enabled</td></tr>
<tr><td>ANIMATED_MODELS</td><td>Model animation: 0 = disabled, 1 = enabled</td></tr>
<tr><td>PRELOAD_ALL_MODELS</td><td>0 = load models only when needed, 1 = preload all models when loading the game</td></tr>
<tr><td>ENABLE_GAMEPLAY_SHORTCUTS</td><td>Keyboard shortcuts for gameplay and ordering by right-clicking: 0 = disabled, 1 = enabled<br>Can be changed in runtime via the menubar.</td></tr>
<tr><td>SHOW_TIME_OBJ_INFO</td><td>Display the current time and values for the selected object: 0 = disabled, 1 = enabled<br>Can be changed in runtime via the menubar.</td></tr>
<tr><td>ENABLE_GAMESET_TRACING</td><td>Allow the gameset script to print trace information into the console (stdout). 1 = yes, 0 = no</td></tr>
</tbody>
</table>

<h2>Known issues</h2>
<ul>
<li><b>Texture compression is disabled even with TEXTURE_COMPRESSION 1 in settings.txt</b>
<br>The texture loading in version 0.0.3 has been rewritten, and the new code doesn’t support texture compression for various reasons.</li>
<li><b>wkbre is frozen / stops drawing.</b>
<br>Minimize and restore the window. If it still does not draw, close it. Don't forget the task manager!</li>
<li><b>When I load a savegame made with wkbre in the original engine, there are some issues. The AI doesn’t work well, the formations move poorly, …</b>
<br>This is going to be fixed in a next release.</li>
<li><b>I don’t find my savegame in WKB.</b>
<br>Look at every tab (skirmish, campaign, multiplayer).</li>
<li><b>Firing units like light infantry and light cavalry spawn missiles that don't hurt the enemies!</b>
<br>wkbre's support for missiles is poor at the moment.</li>
<li><b>With WKBattles or WK 1.4 data, starting the level when the level has already been started will cause an infinite loop.</b>
<br>This bug seems to occur in the original engine too.</li>
<li><b>There are bugs!</b>
<br>Leave these poor living spirits alone! Anyway they will be squashed in the near or distant future.</li>
</ul>

<h2>Bro tips</h2>
<ul>
<li>After loading a lvl file, press <b>'S'</b>, <b>'F'</b>, <b>'Enter'</b>, then <b>'P'</b> to directly play it.</li>
<li>In WKB, if you want to quickly create trees, select an object, press <b>'V'</b>, and choose <b>MARKER AutoTree...</b>.</li>
<li>In WKB, if you want an AI-controlled sapper, scout, succubus or arch druid, use the <b>'V'</b> command.
</ul>
<p>The last two tips can also be done with the new <b>Objects creation</b> window with the <b>Send "On Stampdown" event</b> checkbox enabled.</p>

<h2>Contact</h2>
<p>If you have a questions, you have found a bug or simply have a suggestion, please contact me:</p>
<p>Email: <a href="mailto:agpetit69@gmail.com">agpetit69@gmail.com</a></p>
<p>Or visit the <a href="http://steamcommunity.com/groups/WARKC">Warrior Kings Community on Steam</a> or the <a href="http://wkforums.de.to/">Warrior Kings Forum</a>.</p>
<p>And don't forget to go to <a href="https://github.com/AdrienTD/wkbre">wkbre's GitHub repository</a> for the lastest version of wkbre and the source code!</p>
<p>Enjoy! :) </p>
</body></html>